var c=(a,b)=>{if(!b.has(a))throw TypeError("Cannot read from private field");return b.get(a)},g=(a,b,d)=>{if(b.has(a))throw TypeError("Cannot add the same private member more than once");b instanceof WeakSet?b.add(a):b.set(a,d)},l=(a,b,d)=>{if(!b.has(a))throw TypeError("Cannot write to private field");b.set(a,d)},q=(a,b,d)=>{if(!b.has(a))throw TypeError("Cannot access private method");return d},aa=a=>{var b=t;return{set K(d){l(a,b,d)},get K(){return c(a,b)}}};
(function(){function a(d){if(!d.ga){d.ga=!0;var e={};e=(d.integrity&&(e.integrity=d.integrity),d.referrerPolicy&&(e.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?e.credentials="include":d.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e);fetch(d.href,e)}}const b=document.createElement("link").relList;if(!(b&&b.supports&&b.supports("modulepreload"))){for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);(new MutationObserver(d=>
{for(const e of d)if(e.type==="childList")for(const f of e.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)})).observe(document,{childList:!0,subtree:!0})}})();const y={v:244,u:192,da:10,ca:1,W:42,V:4,X:.02,Z:0,Y:1,ma:!0,la:!1,ba:16.667,B:25};function ba(a){a=[...a];for(let b=a.length-1;b>0;b--){const d=Math.floor(Math.random()*(b+1));[a[b],a[d]]=[a[d],a[b]]}return a}
function ca(a){var b=Math.max(10,Math.min(a,80));const d=b*Math.PI/180;a=[];(a.push([{dx:0,dy:-1}]),b<50)?(a.push([{dx:1,dy:-1},{dx:-1,dy:-1}]),b=Math.round(1/Math.tan(d)),a.push([{dx:b,dy:-1},{dx:b*-1,dy:-1}])):(b=Math.round(Math.tan(d)),a.push([{dx:1,dy:-b},{dx:-1,dy:-b}]));return a}
async function da(){try{const a=await fetch("./src/data/particles.data");if(!a.ok)throw Error(`HTTP error! Status: ${a.status}`);return await a.text()}catch(a){throw console.error("Failed to read particle data from ./src/data/particles.data:",a),Error("Failed to load particle data.");}}
async function ea(){var a=await da();let b={};var d=new Set,e=null;for(var f of a.split("\n"))if(a=f.trim(),a.length!==0&&!a.startsWith("#"))if(a.startsWith("[")&&a.endsWith("]"))a=parseInt(a.slice(1,-1),10),isNaN(a)||a<10?e=null:d.has(a)?(console.warn(`[Loader] Duplicate ID found: ${a}. Ignoring.`),e=null):(d.add(a),e=a,b[a]={});else if(e!==null&&(a=a.split(":").map(k=>k.trim()),a.length===2)){const k=a[1],h=b[e];switch(a[0]){case "name":h.name=k;break;case "category":h.g=parseInt(k,10);break;case "base_color":h.L=
k;break;case "variant_color":h.T=k;break;case "is_movable":h.N=k==="true";break;case "density":h.l=parseFloat(k);break;case "max_concentration":h.ha=parseInt(k);break;case "repose_angle":h.S=parseFloat(k)}}d={};for(const k in b)e=b[k],f=parseInt(k,10),e.name===void 0||e.g===void 0||e.L===void 0||e.T===void 0||e.N===void 0||e.l===void 0?console.warn(`[Loader] Corrupted particle block found of ID: ${f}. Missing core properties.`):(a={id:f,name:e.name,C:e.L,I:e.T,A:e.N,l:e.l},e.g===1?d[f]={...a,g:1}:
e.g===2?d[f]={...a,P:e.ha,g:2}:e.g===3?d[f]={...a,g:3}:e.g===4?d[f]={...a,g:4,R:e.S,G:ca(e.S)}:e.g===5&&(d[f]={...a,g:5}));return d[0]={id:0,name:"Empty",g:0,C:"#0E0E11",I:"#0E0E11",A:!0,l:0},d}var z,A,C,D,F,fa,ha,ia,ja,ka,la;
class ma{constructor(a){g(this,ia);g(this,z);g(this,A);g(this,C);g(this,D);g(this,F);g(this,fa);g(this,ha);l(this,z,a);l(this,A,c(this,z).getContext("2d"));l(this,C,y.v);l(this,D,y.u);l(this,F,new Uint8ClampedArray(c(this,C)*c(this,D)*4));l(this,fa,[]);l(this,ha,new Map);c(this,z).width=c(this,C);c(this,z).height=c(this,D);c(this,A).imageSmoothingEnabled=!1;c(this,A).translate(0,c(this,z).height);c(this,A).scale(1,-1)}}z=new WeakMap;A=new WeakMap;C=new WeakMap;D=new WeakMap;F=new WeakMap;fa=new WeakMap;
ha=new WeakMap;ia=new WeakSet;ja=function(){var a=c(this,fa);const b=c(this,C),d=c(this,D);for(const e of a){a=(d-1-e.position.y)*b+e.position.x;let f=q(this,ia,ka).call(this,e);c(this,F)[a*4]=f[0];c(this,F)[a*4+1]=f[1];c(this,F)[a*4+2]=f[2];c(this,F)[a*4+3]=f[3]}};ka=function(a){return a.color};
la=function(a){var b=c(this,ha);if(b.size!==0)for(const [e,f]of b){var d=f[3];b=d/255;const k=Math.round(f[1]*b+a[e*4+1]*(1-b)),h=Math.round(f[2]*b+a[e*4+2]*(1-b));d=Math.min(a[e*4+3],d);a[e*4]=Math.round(f[0]*b+a[e*4]*(1-b));a[e*4+1]=k;a[e*4+2]=h;a[e*4+3]=d}};
const na=Object.freeze({ya:new Uint8ClampedArray([255,255,255,255]),J:new Uint8ClampedArray([0,0,0,255]),qa:new Uint8ClampedArray([128,128,128,255]),RED:new Uint8ClampedArray([255,0,0,255]),ra:new Uint8ClampedArray([0,255,0,255]),ja:new Uint8ClampedArray([0,0,255,255]),za:new Uint8ClampedArray([255,255,0,255]),ka:new Uint8ClampedArray([0,255,255,255]),sa:new Uint8ClampedArray([255,0,255,255]),va:new Uint8ClampedArray([0,0,0,0]),ua:new Uint8ClampedArray([255,255,255,128])});
function oa(a){if(a==null)return na.J;a=a.replace("#","");if(a.length===6)a+="FF";else if(a.length===3){let d="";for(var b of a)d+=b,d+=b;a=d+"FF"}else return na.J;b=parseInt(a,16);return new Uint8ClampedArray([b>>24&255,b>>16&255,b>>8&255,b&255])}
const pa=Object.freeze({U:[{dx:-1,dy:1},{dx:0,dy:1},{dx:1,dy:1},{dx:-1,dy:0},{dx:1,dy:0},{dx:-1,dy:-1},{dx:0,dy:-1},{dx:1,dy:-1}]}),qa=Object.freeze({wa:{dx:-1,dy:1},ea:{dx:0,dy:1},xa:{dx:1,dy:1},$:{dx:-1,dy:0},ta:{dx:1,dy:0},oa:{dx:-1,dy:-1},na:{dx:0,dy:-1},pa:{dx:1,dy:-1}});var G,H,ra,sa,ta;function ua(a,b){c(a,H).add(b.index);b=va(a,b);for(const d of b)c(a,H).add(d.index)}function wa(a,b,d){return b>=0&&b<a.width&&d>=0&&d<a.height?c(a,G)[d*a.width+b]:null}
function xa(a,b,d,e=!1){for(var f of d)if(f){d=ba(f);for(const k of d)if(d=k.dx,e&&Math.random()>.5&&(d=k.dx*-1),(d=wa(a,b.position.x+d,b.position.y+k.dy))&&d.A&&b.l>d.l)return c(a,G)[d.index]=b,c(a,G)[b.index]=d,e={x:b.position.x,y:b.position.y},f=b.index,b.position=d.position,b.index=d.index,d.position=e,d.index=f,ua(a,b),ua(a,d),d}return null}
function ya(a,b,d){c(a,G)[b.index]=d;c(a,G)[d.index]=b;const e={x:b.position.x,y:b.position.y},f=b.index;b.position=d.position;b.index=d.index;d.position=e;d.index=f;ua(a,b);ua(a,d)}function za(a,b,d){return wa(a,b.position.x+d.dx,b.position.y+d.dy)}function va(a,b){return pa.U.map(d=>za(a,b,d)).filter(d=>d!==null).filter(()=>!0)}
class Aa{constructor(a,b,d){g(this,ra);g(this,G);g(this,H);this.width=a;this.height=b;l(this,G,Array(a*b));l(this,H,new Set);this.aa=d;q(this,ra,ta).call(this,0)}get data(){return c(this,G)}get M(){return c(this,H)}}G=new WeakMap;H=new WeakMap;ra=new WeakSet;
sa=function(a){a=this.aa[a];if(!a)return null;var b=Math.round(Math.random()*5)/5;const d=oa(a.C),e=oa(a.I);b=new Uint8ClampedArray([d[0]+(e[0]-d[0])*b,d[1]+(e[1]-d[1])*b,d[2]+(e[2]-d[2])*b,d[3]+(e[3]-d[3])*b]);b={handle:-1,id:a.id,name:a.name,color:b,position:{x:-1,y:-1},index:0,A:a.A,l:a.l};return a.g===0?{...b,g:0}:a.g===1?{...b,g:1}:a.g===2?{...b,g:2,Aa:0,P:a.P}:a.g===3?{...b,g:3}:a.g===4?{...b,g:4,R:a.R,G:a.G}:a.g===5?{...b,g:5,node:-1}:null};
ta=function(a){const b=this.width,d=this.height;l(this,G,Array(b*d));for(let e=0;e<d;e++)for(let f=0;f<b;f++){let k=e*b+f,h=q(this,ra,sa).call(this,a);h&&(h.position.x=f,h.position.y=e,h.index=k,c(this,G)[k]=h,c(this,H).add(h.index))}};const Ba=Object.keys(qa);var Ca,Da,Ea,Fa,Ga,I,J,Ha,Ia,Ja,Ka,L,M,La,N,Ma,Na,Oa,Pa,Qa;
function Ra(a){const b=a.width;var d=a.height;const e=[],f=[],k={};for(--d;d>=0;d--)for(let w=0;w<b;w++){var h=d*b+w,m=wa(a,w,d);if(!m||m.g!==2||m.g!==2)continue;const u=za(a,m,qa.ea);var r=za(a,m,qa.$),n=u&&u.id===m.id;const x=r&&r.id===m.id;let v=-1;x&&(v=d*b+(w-1));let B=-1;n&&(B=(d+1)*b+w);r=u&&u.id===0;if(x||n)if(x&&!n)n=k[v],e[n].push(h),r&&(f[n].j.push(m),f[n].m.push(u)),k[h]=n;else if(!x&&n)n=k[B],e[n].push(h),r&&(f[n].j.push(m),f[n].m.push(u)),k[h]=n;else{if(n=k[B],e[n].push(h),r&&(f[n].j.push(m),
f[n].m.push(u)),k[h]=n,h=k[v],h!==n){m=f[h];for(const p of m.j)f[n].j.push(p);for(const p of m.m)f[n].m.push(p);m=e[h];for(const p of m)k[p]=n;e[h]=[];f[h]={j:[],m:[]}}}else n=f.length,e.push([h]),f.push({j:[],m:[]}),r&&(f[n].j.push(m),f[n].m.push(u)),k[h]=n}return f.filter(w=>w.j.length>30)}
class Sa{constructor(a,b,d,e){g(this,N);g(this,Ca);g(this,Da);g(this,Ea);g(this,Fa);g(this,Ga);g(this,I);g(this,J);g(this,Ha);g(this,Ia);g(this,Ja);g(this,Ka);g(this,L);g(this,M);g(this,La,f=>{if(c(this,Ha)){if(c(this,L)){var k=f-c(this,L);l(this,L,f);var h=c(this,Da),m=c(this,I),r=c(this,Ca),n=Math.floor(h.o.x),w=Math.floor(h.o.y);if(h.F){var u=q(h,O,Ta).call(h,n,w);for(var x of u)c(r,ha).set(x.index,x.value)}if(h.h||h.i)if(r=n<c(h,Q)+c(h,R)&&n>=0-c(h,R),u=w<c(h,Ua)+c(h,R)&&w>=0-c(h,R),r&&u)for(r=
h.h?c(h,S):0,--w,u=c(h,R),x=-u;x<=u;x++)for(let K=-u;K<=u;K++){if(x*x+K*K>u*u)continue;const E=n+x,P=w+K;if(E>=0&&E<m.width&&P>=0&&P<m.height){var v=wa(m,E,P);if(r===0||v===null||v.id===0)if(v=m,E>=0&&E<v.width&&P>=0&&P<v.height){var B=q(v,ra,sa).call(v,r);B.position.x=E;B.position.y=P;B.index=P*v.width+E;ua(v,B);c(v,G)[P*v.width+E]=B}}}h.O&&(m=h.D*c(h,Va),m=c(h,R)-m,m=Math.floor(m),m=Math.min(c(h,Wa),m),m=Math.max(0,m),l(h,R,m),h.D=0);l(this,M,c(this,M)+k);for(k=0;c(this,M)>=c(this,Ka);){m=[];for(var p of c(this,
I).M)m.push(c(this,I).data[p]);c(this,I).M.clear();h=c(this,Ca);c(h,fa).push(...m);q(this,N,Ma).call(this,m);this.H++;l(this,M,c(this,M)-c(this,Ka));k++;k>60&&l(this,M,0)}p=c(this,Ca);q(p,ia,ja).call(p);k=new Uint8ClampedArray(c(p,F));q(p,ia,la).call(p,k);k=new ImageData(k,c(p,C),c(p,D));c(p,A).putImageData(k,0,0);c(p,fa).length=0;c(p,ha).clear();p=c(this,Ea);c(p,Xa)&&(q(p,Ya,Za).call(p,f,this),(f=c(p,T).get("fps"))&&(f.textContent=`FPS: ${c(p,$a).toFixed(2)}`),(f=c(p,T).get("tps"))&&(f.textContent=
`TPS: ${c(p,ab).toFixed(2)}`))}else l(this,L,f);l(this,Ia,requestAnimationFrame(c(this,La)))}});l(this,Ca,b);l(this,Da,d);l(this,Ea,e);l(this,Fa,y.v);l(this,Ga,y.u);l(this,I,new Aa(c(this,Fa),c(this,Ga),a));l(this,J,new Set);l(this,Ha,!1);l(this,Ia,null);l(this,Ja,y.ba);l(this,Ka,y.B);l(this,L,null);l(this,M,0);this.H=0}start(){c(this,Ha)||(l(this,Ha,!0),c(this,La).call(this,0))}}Ca=new WeakMap;Da=new WeakMap;Ea=new WeakMap;Fa=new WeakMap;Ga=new WeakMap;I=new WeakMap;J=new WeakMap;Ha=new WeakMap;
Ia=new WeakMap;Ja=new WeakMap;Ka=new WeakMap;L=new WeakMap;M=new WeakMap;La=new WeakMap;N=new WeakSet;Ma=function(a){c(this,J).clear();a=ba(a);a.sort((b,d)=>b.position.y-d.position.y);for(const b of a)if(b&&!c(this,J).has(b.index))switch(b.g){case 2:q(this,N,Na).call(this,b);break;case 3:q(this,N,Oa).call(this,b);break;case 4:q(this,N,Pa).call(this,b)}a=Ra(c(this,I));q(this,N,Qa).call(this,a)};
Na=function(a){const b=xa(c(this,I),a,[[{dx:0,dy:-1}],[{dx:-1,dy:-1},{dx:1,dy:-1}],[{dx:-1,dy:0},{dx:1,dy:0}]],!1);b&&(c(this,J).add(a.index),c(this,J).add(b.index))};Oa=function(a){var b=[[qa[Ba[Math.floor(Math.random()*Ba.length)]]]];(b=xa(c(this,I),a,b,!1))&&(c(this,J).add(a.index),c(this,J).add(b.index))};Pa=function(a){var b=a.G;(b=xa(c(this,I),a,b,!0))&&(c(this,J).add(a.index),c(this,J).add(b.index))};
Qa=function(a){for(const b of a){a=b.j.sort((h,m)=>m.position.y-h.position.y);const d=b.m.sort((h,m)=>h.position.y-m.position.y),e=a.length;let f=0;const k=e/4;for(let h=0;h<e;h++){const m=a[h],r=d[h];if(Math.sqrt(m.position.x*r.position.x+m.position.y*r.position.y),m.position.y>r.position.y&&(ya(c(this,I),m,r),c(this,J).add(m.index),c(this,J).add(r.index),f++,f>=k))break}}};var bb,Q,Ua,cb,U,V,Va,Wa,S,W,R,db,eb,X,Y,Z,O,Ta,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub;
class vb{constructor(a,b,d,e){g(this,O);g(this,bb);g(this,Q);g(this,Ua);g(this,cb);g(this,U);g(this,V);g(this,Va);g(this,Wa);g(this,S);g(this,W);g(this,R);g(this,db);g(this,eb);g(this,X);g(this,Y);g(this,Z);g(this,lb,f=>{l(this,Z,f.pointerId);f.button===0?(this.h=!0,this.i=!1):f.button===2?(this.i=!0,this.h=!1):(this.h=!1,this.i=!1);try{c(this,U).setPointerCapture(f.pointerId)}catch{}const k=c(this,U).getBoundingClientRect(),h=c(this,Q)/k.width,m=c(this,Ua)/k.height;this.o.x=(f.clientX-k.left)*h;
this.o.y=c(this,U).height-(f.clientY-k.top)*m});g(this,mb,f=>{if(c(this,Z)===f.pointerId){l(this,Z,null);try{c(this,U).releasePointerCapture(f.pointerId)}catch{}}this.i=this.h=!1});g(this,nb,f=>{var k=c(this,U).getBoundingClientRect();const h=c(this,Q)/k.width,m=c(this,U).height/k.height;if(this.o.x=(f.clientX-k.left)*h,this.o.y=c(this,U).height-(f.clientY-k.top)*m,typeof f.buttons=="number")k=(f.buttons&2)===2,this.h=(f.buttons&1)===1,this.i=k});g(this,ob,f=>{if(this.h=!1,this.i=!1,c(this,Z)===f.pointerId){try{c(this,
U).releasePointerCapture(f.pointerId)}catch{}l(this,Z,null)}});g(this,pb,()=>{this.i=this.h=!1;l(this,Z,null)});g(this,qb,()=>{document.hidden&&(this.h=!1,this.i=!1,l(this,Z,null))});g(this,rb,f=>{f.preventDefault();this.O=!0;this.D=f.deltaY});g(this,sb,f=>{f.preventDefault()});g(this,tb,()=>{this.F=!0});g(this,ub,()=>{this.F=!1});l(this,bb,e);l(this,Q,y.v);l(this,Ua,y.u);l(this,cb,b);l(this,U,d);l(this,V,a);l(this,Va,y.X);l(this,Wa,y.W);l(this,S,y.da);l(this,W,y.ca);l(this,R,y.V);l(this,db,y.Z);
l(this,eb,y.Y);l(this,X,null);l(this,Y,null);l(this,Z,null);this.i=this.h=!1;this.F=!0;this.O=!1;this.D=0;this.o={x:0,y:0};a=document.getElementById("particle-category-bar");if(!a)throw Error("DOM element of id 'particle-category-bar' does not exist.");q(this,O,hb).call(this,a);a=document.getElementById("particle-button-container");if(!a)throw Error("DOM element of id 'particle-button-container' does not exist.");q(this,O,jb).call(this,a);q(this,O,kb).call(this);c(this,Y)&&q(this,O,fb).call(this,
c(this,Y))}}bb=new WeakMap;Q=new WeakMap;Ua=new WeakMap;cb=new WeakMap;U=new WeakMap;V=new WeakMap;Va=new WeakMap;Wa=new WeakMap;S=new WeakMap;W=new WeakMap;R=new WeakMap;db=new WeakMap;eb=new WeakMap;X=new WeakMap;Y=new WeakMap;Z=new WeakMap;O=new WeakSet;
Ta=function(a,b){var d=c(this,R);const e=[],f=c(this,Q),k=c(this,Ua),h=[-1,1],m=(w,u)=>{for(const x of h)for(const v of h){const B=a+w*v,p=b+u*x,K=a+u*v,E=b+w*x;B>=0&&B<f&&p>=0&&p<k&&e.push({index:(k-p)*f+B,value:new Uint8ClampedArray([227,227,227,180])});K>=0&&K<f&&E>=0&&E<k&&e.push({index:(k-E)*f+K,value:new Uint8ClampedArray([227,227,227,180])})}};let r=d,n=0;d-=d;for(m(r,n);n<r;)n++,d<0?d+=2*n+1:(r--,d+=2*(n-r)+1),m(r,n);return e};
fb=function(a){c(this,Y)&&c(this,Y).classList.remove("selected");a.classList.add("selected");l(this,Y,a);l(this,W,parseInt(a.dataset.fa)||1);let b=null;c(this,V)[c(this,S)]!==void 0&&(a=c(this,V)[c(this,S)])&&a.g===c(this,W)&&c(this,X)&&(b=c(this,X));document.querySelectorAll(".particle-button").forEach(d=>{const e=d.dataset.g;e&&parseInt(e)===c(this,W)?(d.style.display="",b||(b=d)):d.style.display="none"});q(this,O,gb).call(this,b)};
gb=function(a){a&&(c(this,X)&&c(this,X).classList.remove("selected"),a.classList.add("selected"),l(this,X,a),l(this,S,parseInt(a.dataset.ia)||0))};
hb=function(a){a.innerHTML="";var b=q(this,O,ib).call(this,1,"Solids","./assets/icons/solid.svg");a.appendChild(b);c(this,W)==1&&l(this,Y,b);b=q(this,O,ib).call(this,2,"Liquids","./assets/icons/liquid.svg");a.appendChild(b);c(this,W)==2&&l(this,Y,b);b=q(this,O,ib).call(this,3,"Gases","./assets/icons/gas.svg");a.appendChild(b);c(this,W)==3&&l(this,Y,b);b=q(this,O,ib).call(this,4,"Sands","./assets/icons/sand.svg");a.appendChild(b);c(this,W)==4&&l(this,Y,b);let d=q(this,O,ib).call(this,5,"Electronics",
"./assets/icons/electronics.svg");a.appendChild(d);c(this,W)==5&&l(this,Y,d);c(this,Y)||l(this,Y,b)};ib=function(a,b,d){const e=document.createElement("button");e.className="category-button";const f=document.createElement("img");return f.src=d,f.alt=b,f.classList.add("category-icon"),e.dataset.fa=a.toString(),e.appendChild(f),e};
jb=function(a){a.innerHTML="";for(const d in c(this,V)){const e=c(this,V)[d];if(!e)continue;const f=document.createElement("button");f.className="particle-button";f.textContent=e.name;const k=e.C,h=e.I;var b=oa(k);b=.299*b[0]+.587*b[1]+.114*b[2]>210?"#323238":"#FFFFFFFF";const m=oa(b);f.style.setProperty("--particle-button-base-color",k);f.style.setProperty("--particle-button-variant-color",h);f.style.color=b;f.style.textShadow=`1px 1px 2px rgba(${m[0]}, ${m[1]}, ${m[2]}, 0.6)`;f.dataset.ia=e.id.toString();
f.dataset.g=e.g.toString();a.appendChild(f);e.id===c(this,S)&&l(this,X,f)}};
kb=function(){const a=c(this,U),b=document.getElementById("particle-category-bar"),d=document.getElementById("particle-button-container");if(!b||!d)throw Error("Cannot find category bar and/ or button container");a.addEventListener("pointerdown",c(this,lb));a.addEventListener("pointermove",c(this,nb));a.addEventListener("pointerup",c(this,mb));a.addEventListener("pointercancel",c(this,ob));a.addEventListener("lostpointercapture",c(this,ob));a.addEventListener("pointerenter",c(this,tb));a.addEventListener("pointerleave",
c(this,ub));a.addEventListener("wheel",c(this,rb),{passive:!1});c(this,cb).addEventListener("contextmenu",c(this,sb));window.addEventListener("pointerup",c(this,pb));window.addEventListener("mouseup",c(this,pb));document.addEventListener("visibilitychange",c(this,qb));b.addEventListener("click",e=>{e.target&&(e=e.target.closest(".category-button"))&&e&&q(this,O,fb).call(this,e)});d.addEventListener("click",e=>{e.target&&(e=e.target.closest(".particle-button"))&&q(this,O,gb).call(this,e)})};lb=new WeakMap;
mb=new WeakMap;nb=new WeakMap;ob=new WeakMap;pb=new WeakMap;qb=new WeakMap;rb=new WeakMap;sb=new WeakMap;tb=new WeakMap;ub=new WeakMap;var Xa,wb,T,t,$a,ab,xb,Ya,Za,yb;class zb{constructor(a){g(this,Ya);g(this,Xa);g(this,wb);g(this,T);g(this,t);g(this,$a);g(this,ab);g(this,xb);l(this,Xa,!1);l(this,wb,!1);l(this,T,new Map);l(this,t,0);l(this,$a,0);l(this,ab,0);l(this,xb,0);q(this,Ya,yb).call(this,a)}}Xa=new WeakMap;wb=new WeakMap;T=new WeakMap;t=new WeakMap;$a=new WeakMap;ab=new WeakMap;xb=new WeakMap;
Ya=new WeakSet;Za=function(a,b){const d=a-c(this,xb);d>=1E3&&(l(this,$a,c(this,t)*1E3/d),l(this,ab,b.H*1E3/d),l(this,t,0),b.H=0,l(this,xb,a));aa(this).K++};
yb=function(a){var b=document.createElement("div");b.classList.add("debug-container");a.appendChild(b);c(this,T).set("debug-container",b);a=document.createElement("div");a.classList.add("debug-info-container");b.appendChild(a);c(this,T).set("info-container",a);b=document.createElement("div");b.classList.add("debug-info");a.appendChild(b);c(this,T).set("fps",b);b=document.createElement("div");b.classList.add("debug-info");a.appendChild(b);c(this,T).set("tps",b)};
(async function(){try{y.v=Math.max(40,Math.min(400,y.v));y.u=Math.max(40,Math.min(400,y.u));y.B=Math.max(4,Math.min(1E3,y.B));Object.freeze(y);const a=document.getElementById("main-canvas");if(!(a instanceof HTMLCanvasElement))throw Error("HTML element 'main-canvas' does not exist.");const b=document.getElementById("main-panel");if(!(b instanceof HTMLDivElement))throw Error("HTML element 'main-panel' does not exist.");const d=new ma(a),e=await ea(),f=new vb(e,b,a,d),k=new zb(b);l(k,Xa,!0);l(k,wb,
!0);(new Sa(e,d,f,k)).start();console.log(e)}catch(a){console.error("CRITICAL ERROR: Failed to initialize engine due to data loading failure.",a)}})();
