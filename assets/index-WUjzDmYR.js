(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();const I=Object.freeze({GAME_WIDTH:244,GAME_HEIGHT:192,SELECTED_PARTICLE:10,SELECTED_CATEGORY:1,BRUSH_MAX_SIZE:42,BRUSH_CUR_SIZE:4,BRUSH_SENSITIVITY:.02,CURRENT_PRESSURE:0,CURRENT_CONCENTRATION:1,DEBUG_START_ENABLED:!0,DEBUG_OVERLAY_START_ENABLED:!1,RENDER_UPDATE_INTERVAL:15,PHYSICS_UPDATE_INTERVAL:16.667}),T={lerp(c,t,e){return c+(t-c)*e},shuffleArray(c){const t=[...c];for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t},calculateRepose(c){let t=Math.max(10,Math.min(c,80));const e=t*Math.PI/180;let i=[];if(i.push([{dx:0,dy:-1}]),t<50){i.push([{dx:1,dy:-1},{dx:-1,dy:-1}]);const s=Math.round(1/Math.tan(e));i.push([{dx:s,dy:-1},{dx:s*-1,dy:-1}])}else{const s=Math.round(Math.tan(e));i.push([{dx:1,dy:-s},{dx:-1,dy:-s}])}return i}};async function S(c){try{const t=await fetch(c);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return await t.text()}catch(t){throw console.error(`Failed to read particle data from ${c}:`,t),new Error("Failed to load particle data.")}}async function _(c){const t=await S(c);let e={},i=new Set,s=null;for(const o of t.split(`
`)){const r=o.trim();if(!(r.length===0||r.startsWith("#"))){if(r.startsWith("[")&&r.endsWith("]")){const a=r.slice(1,-1),l=parseInt(a,10);if(isNaN(l)||l<10){s=null;continue}if(i.has(l)){console.warn(`[Loader] Duplicate ID found: ${l}. Ignoring.`),s=null;continue}i.add(l),s=l,e[l]={};continue}if(s!==null){const a=r.split(":").map(l=>l.trim());if(a.length===2){const l=a[0],d=a[1],h=e[s];switch(l){case"name":h.name=d;break;case"category":h.category=parseInt(d,10);break;case"base_color":h.base_color=d;break;case"variant_color":h.variant_color=d;break;case"is_movable":h.is_movable=d==="true";break;case"density":h.density=parseFloat(d);break;case"max_concentration":h.max_concentration=parseInt(d);break;case"repose_angle":h.repose_angle=parseFloat(d);break}}}}}const n={};for(const o in e){const r=e[o],a=parseInt(o,10);if(r.name===void 0||r.category===void 0||r.base_color===void 0||r.variant_color===void 0||r.is_movable===void 0||r.density===void 0){console.warn(`[Loader] Corrupted particle block found of ID: ${a}. Missing core properties.`);continue}let l={id:a,name:r.name,baseColor:r.base_color,variantColor:r.variant_color,isMovable:r.is_movable,density:r.density};r.category===1?n[a]={...l,category:1}:r.category===2?n[a]={...l,maxConcentration:r.max_concentration,category:2}:r.category===3?n[a]={...l,category:3}:r.category===4?n[a]={...l,category:4,reposeAngle:r.repose_angle,reposeDirections:T.calculateRepose(r.repose_angle)}:r.category===5&&(n[a]={...l,category:5})}return n[0]={id:0,name:"Empty",category:0,baseColor:"#0E0E11",variantColor:"#0E0E11",isMovable:!0,density:0},n}class R{#t;#i;#s;#e;#o;#r;#a;constructor(t,e,i){this.#t=i,this.#i=this.#t.getContext("2d"),this.#s=t,this.#e=e,this.#o=new Uint8ClampedArray(this.#s*this.#e*4),this.#r=[],this.#a=new Map,this.#t.width=this.#s,this.#t.height=this.#e,this.#i.imageSmoothingEnabled=!1,this.#i.translate(0,this.#t.height),this.#i.scale(1,-1)}queueParticles(t,e){if(this.#r.push(...t),e){const i=this.#s,s=this.#e;for(const n of t){const r=(s-1-n.position.y)*i+n.position.x;this.#a.set(r,e)}}}queueOverlayPixels(t){for(const e of t)this.#a.set(e.index,e.value)}renderThisFrame(){this.#l();let t=new Uint8ClampedArray(this.#o);this.#h(t);const e=new ImageData(t,this.#s,this.#e);this.#i.putImageData(e,0,0),this.#r.length=0,this.#a.clear()}#l(){const t=this.#r,e=this.#s,i=this.#e;for(const s of t){const n=s.position.x,o=s.position.y,a=(i-1-o)*e+n;let l=this.#n(s);this.#o[a*4+0]=l[0],this.#o[a*4+1]=l[1],this.#o[a*4+2]=l[2],this.#o[a*4+3]=l[3]}}#n(t){return t.color}#h(t){const e=this.#a;if(e.size!==0)for(const[i,s]of e){const n=t[i*4+0],o=t[i*4+1],r=t[i*4+2],a=t[i*4+3],l=s[0],d=s[1],h=s[2],u=s[3],f=u/255,g=Math.round(l*f+n*(1-f)),y=Math.round(d*f+o*(1-f)),m=Math.round(h*f+r*(1-f)),E=Math.min(a,u);t[i*4+0]=g,t[i*4+1]=y,t[i*4+2]=m,t[i*4+3]=E}}}const L=Object.freeze({WHITE:new Uint8ClampedArray([255,255,255,255]),BLACK:new Uint8ClampedArray([0,0,0,255]),GRAY:new Uint8ClampedArray([128,128,128,255]),RED:new Uint8ClampedArray([255,0,0,255]),GREEN:new Uint8ClampedArray([0,255,0,255]),BLUE:new Uint8ClampedArray([0,0,255,255]),YELLOW:new Uint8ClampedArray([255,255,0,255]),CYAN:new Uint8ClampedArray([0,255,255,255]),MAGENTA:new Uint8ClampedArray([255,0,255,255]),TRANSPARENT_BLACK:new Uint8ClampedArray([0,0,0,0]),SEMI_TRANSPARENT_WHITE:new Uint8ClampedArray([255,255,255,128])}),v={createColor(c){return this.hexToColor(c)},hexToColor(c){if(c==null)return L.BLACK;let t=c.replace("#","");if(t.length===6)t+="FF";else if(t.length===3){let i="";for(const s of t)i+=s,i+=s;t=i+"FF"}else return L.BLACK;const e=parseInt(t,16);return new Uint8ClampedArray([e>>24&255,e>>16&255,e>>8&255,e&255])},colorToHex(c){const[t,e,i,s]=c,n=o=>o.toString(16).padStart(2,"0");return`#${n(t)}${n(e)}${n(i)}${n(s)}`},lerpColor(c,t,e){const i=c[0]+(t[0]-c[0])*e,s=c[1]+(t[1]-c[1])*e,n=c[2]+(t[2]-c[2])*e,o=c[3]+(t[3]-c[3])*e;return new Uint8ClampedArray([i,s,n,o])},createColorRamp(c,t,e){if(e<2)return[c,t];const i=1/(e-1),s=new Array(e);for(let n=0;n<e;n++){const o=n*i;s[n]=this.lerpColor(c,t,o)}return s},invertColor(c){const t=255-c[0],e=255-c[1],i=255-c[2],s=c[3];return new Uint8ClampedArray([t,e,i,s])},getLuminance(c){const t=c[0],e=c[1],i=c[2];return .299*t+.587*e+.114*i}},M=Object.freeze({ALL_NEIGHBORS:[{dx:-1,dy:1},{dx:0,dy:1},{dx:1,dy:1},{dx:-1,dy:0},{dx:1,dy:0},{dx:-1,dy:-1},{dx:0,dy:-1},{dx:1,dy:-1}]}),D=Object.freeze({UP_LEFT:{dx:-1,dy:1},UP:{dx:0,dy:1},UP_RIGHT:{dx:1,dy:1},LEFT:{dx:-1,dy:0},RIGHT:{dx:1,dy:0},DOWN_LEFT:{dx:-1,dy:-1},DOWN:{dx:0,dy:-1},DOWN_RIGHT:{dx:1,dy:-1}});class B{#t;#i;constructor(t,e,i){this.width=t,this.height=e,this.#t=new Array(t*e),this.#i=new Set,this.ParticleDataBlueprint=i,this.#e(0)}get data(){return this.#t}get dirtyParticles(){return this.#i}#s(t){const e=this.ParticleDataBlueprint[t];if(!e)return null;let s=Math.random(),o=6-1,r=Math.round(s*o)/o;const a=v.hexToColor(e.baseColor),l=v.hexToColor(e.variantColor),d=v.lerpColor(a,l,r);let h={handle:-1,id:e.id,name:e.name,color:d,position:{x:-1,y:-1},index:0,isMovable:e.isMovable,density:e.density};return e.category===0?{...h,category:0}:e.category===1?{...h,category:1}:e.category===2?{...h,category:2,concentration:0,maxConcentration:e.maxConcentration}:e.category===3?{...h,category:3}:e.category===4?{...h,category:4,reposeAngle:e.reposeAngle,reposeDirections:e.reposeDirections}:e.category===5?{...h,category:5,node:-1}:null}#e(t){const e=this.width,i=this.height;this.#t=new Array(e*i);for(let s=0;s<i;s++)for(let n=0;n<e;n++){let o=s*e+n,r=this.#s(t);r&&(r.position.x=n,r.position.y=s,r.index=o,this.#t[o]=r,this.#i.add(r.index))}}createParticleAt(t,e,i,s,n){if(!this.isInBounds(t,e))return!1;let o=this.#s(i);return o.position.x=t,o.position.y=e,o.index=e*this.width+t,s&&this.markDirty(o,n),this.#t[e*this.width+t]=o,!0}getParticleAt(t,e){return this.isInBounds(t,e)?this.#t[e*this.width+t]:null}tryMoveParticle(t,e,i=!1,s=!1,n=!1){for(const o of e){if(!o)continue;const r=T.shuffleArray(o);for(const a of r){let l=a.dx;i&&Math.random()>.5&&(l=a.dx*-1);const d=t.position.x+l,h=t.position.y+a.dy,u=this.getParticleAt(d,h);if(u&&u.isMovable&&t.density>u.density){this.#t[u.index]=t,this.#t[t.index]=u;const f={x:t.position.x,y:t.position.y},g=t.index;return t.position=u.position,t.index=u.index,u.position=f,u.index=g,s&&(this.markDirty(t,n),this.markDirty(u,n)),u}}}return null}swapParticles(t,e,i=!1,s=!1){return null}getNeighborOf(t,e){const i=t.position.x+e.dx,s=t.position.y+e.dy;return this.getParticleAt(i,s)}getNeighborsOf(t,e,i,s){return e.map(o=>this.getNeighborOf(t,o)).filter(o=>o!==null).filter(o=>{const r=i===void 0||o.category===i,a=s===void 0||o.id===s;return r&&a})}markDirty(t,e){if(this.#i.add(t.index),e){const i=this.getNeighborsOf(t,M.ALL_NEIGHBORS);for(const s of i)this.#i.add(s.index)}}isInBounds(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height}fillCircleAt(t,e,i,s){for(let n=-i;n<=i;n++)for(let o=-i;o<=i;o++){if(n*n+o*o>i*i)continue;const r=t+n,a=e+o;if(!this.isInBounds(r,a))continue;const l=this.getParticleAt(r,a);(s===0||l===null||l.id===0)&&this.createParticleAt(r,a,s,!0,!0)}}}class N{#t;#i;#s;#e;#o;#r;#a;#l;#n;#h;#p;#f;#d;constructor(t,e,i,s,n,o){this.#t=s,this.#i=n,this.#s=o,this.#e=t,this.#o=e,this.#r=new B(t,e,i),this.#a=new Set,this.#l=!1,this.#n=null,this.#h=I.RENDER_UPDATE_INTERVAL,this.#p=I.PHYSICS_UPDATE_INTERVAL,this.#f=null,this.#d=0,this.tickCount=0}start(){this.#l||(this.#l=!0,this.#c(0))}stop(){this.#l=!1,this.#n&&(cancelAnimationFrame(this.#n),this.#n=null)}#c=t=>{if(!this.#l)return;if(!this.#f){this.#f=t,this.#n=requestAnimationFrame(this.#c);return}const e=t-this.#f;for(this.#f=t,this.#i.processInput(this.#r,this.#t),this.#d+=e;this.#d>=this.#p;){const i=[];for(const s of this.#r.dirtyParticles)i.push(this.#r.data[s]);this.#r.dirtyParticles.clear(),this.#t.queueParticles(i),this.#u(i),this.tickCount++,this.#d-=this.#p}this.#t.renderThisFrame(),this.#s.updateDisplay(t,this),this.#n=requestAnimationFrame(this.#c)};#u(t){this.#a.clear(),t=T.shuffleArray(t),t.sort((e,i)=>e.position.y-i.position.y);for(const e of t)if(e&&!this.#a.has(e.index))switch(e.category){case 1:break;case 2:this.#m(e);break;case 3:break;case 4:this.#y(e);break;case 5:break;default:continue}}#m(t){}#y(t){let e=t.reposeDirections;const i=this.#r.tryMoveParticle(t,e,!0,!0,!0);i&&(this.#a.add(t.index),this.#a.add(i.index))}groupParticles(t,e){const i=t.width,s=t.height,n=[],o={};for(let a=s-1;a>=0;a--)for(let l=0;l<i;l++){const d=a*i+l,h={x:l,y:a},u=t.getParticleAt(l,a);if(!u||u.category!==e)continue;const f=t.getNeighborOf(u,D.UP),g=t.getNeighborOf(u,D.LEFT),y=f&&f.category===e,m=g&&g.category===e;let E=-1;m&&(E=a*i+(l-1));let b=-1;if(y&&(b=(a+1)*i+l),!m&&!y){const p=n.length;n.push([h]),o[d]=p}else if(m&&!y){const p=o[E];n[p].push(h),o[d]=p}else if(!m&&y){const p=o[b];n[p].push(h),o[d]=p}else{const p=o[b];n[p].push(h),o[d]=p;const C=o[E];if(C!==p){const P=n[C];for(const x of P){n[p].push(x);const w=x.y*i+x.x;o[w]=p}n[C]=[]}}}return n.filter(a=>a.length>0)}}class O{#t;#i;#s;#e;#o;#r;#a;#l;#n;#h;#p;#f;#d;#c;#u;constructor(t,e,i,s,n,o){this.#t=t,this.#i=e,this.#s=n,this.#e=o,this.#o=s,this.#r=i.BRUSH_SENSITIVITY,this.#a=i.BRUSH_MAX_SIZE,this.#l=i.SELECTED_PARTICLE,this.#n=i.SELECTED_CATEGORY,this.#h=i.BRUSH_CUR_SIZE,this.#p=i.CURRENT_PRESSURE,this.#f=i.CURRENT_CONCENTRATION,this.#d=null,this.#c=null,this.#u=null,this.isPainting=!1,this.isErasing=!1,this.isDrawingOverlay=!0,this.shouldChangeBrushSize=!1,this.changeBrushSizeDir=0,this.latestMouseCoords={x:0,y:0},this.activeButton="none";const r=document.getElementById("particle-category-bar");if(!r)throw new Error("DOM element of id 'particle-category-bar' does not exist.");this.#b(r);const a=document.getElementById("particle-button-container");if(!a)throw new Error("DOM element of id 'particle-button-container' does not exist.");this.#v(a),this.#P(),this.#c&&this.#y(this.#c)}processInput(t,e){const i=this.latestMouseCoords.x,s=this.latestMouseCoords.y,n={x:Math.floor(i),y:Math.floor(s)};if(this.isDrawingOverlay){const o=this.#m(n.x,n.y);e.queueOverlayPixels(o)}if(this.isPainting||this.isErasing){const o=n.x<this.#t+this.#h&&n.x>=0-this.#h,r=n.y<this.#i+this.#h&&n.y>=0-this.#h;if(o&&r){const a=n.x,l=n.y,d=this.isPainting?this.#l:0;t.fillCircleAt(a,l-1,this.#h,d)}}if(this.shouldChangeBrushSize){const o=this.changeBrushSizeDir*this.#r;let r=this.#h-o;r=Math.floor(r),r=Math.min(this.#a,r),r=Math.max(0,r),this.#h=r,this.changeBrushSizeDir=0}}#m(t,e){const i=this.#h,s=[],n=227,o=227,r=227,a=180,l=this.#t,d=this.#i,h=[-1,1],u=(m,E)=>{for(const b of h)for(const p of h){const C=t+m*p,P=e+E*b,x=t+E*p,w=e+m*b;if(C>=0&&C<l&&P>=0&&P<d){const A=(d-P)*l+C;s.push({index:A,value:new Uint8ClampedArray([n,o,r,a])})}if(x>=0&&x<l&&w>=0&&w<d){const A=(d-w)*l+x;s.push({index:A,value:new Uint8ClampedArray([n,o,r,a])})}}};let f=i,g=0,y=i-i;for(u(f,g);g<f;)g++,y<0?y+=2*g+1:(f--,y+=2*(g-f)+1),u(f,g);return s}#y(t){this.#c&&this.#c.classList.remove("selected"),t.classList.add("selected"),this.#c=t;const e=parseInt(t.dataset.categoryId);this.#n=e||1;let i=null;if(this.#o[this.#l]!==void 0){const s=this.#o[this.#l];s&&s.category===this.#n&&this.#d&&(i=this.#d)}document.querySelectorAll(".particle-button").forEach(s=>{const n=s,o=n.dataset.category;o&&parseInt(o)===this.#n?(n.style.display="",i||(i=n)):n.style.display="none"}),this.#E(i)}#E(t){if(!t)return;this.#d&&this.#d.classList.remove("selected"),t.classList.add("selected"),this.#d=t;const e=parseInt(t.dataset.particleId);this.#l=e||0}#b(t){t.innerHTML="";let e=this.#g(1,"Solids","./assets/icons/solid.svg");t.appendChild(e),this.#n==1&&(this.#c=e);let i=this.#g(2,"Liquids","./assets/icons/liquid.svg");t.appendChild(i),this.#n==2&&(this.#c=i);let s=this.#g(3,"Gases","./assets/icons/gas.svg");t.appendChild(s),this.#n==3&&(this.#c=s);let n=this.#g(4,"Sands","./assets/icons/sand.svg");t.appendChild(n),this.#n==4&&(this.#c=n);let o=this.#g(5,"Electronics","./assets/icons/electronics.svg");t.appendChild(o),this.#n==5&&(this.#c=o),this.#c||(this.#c=n)}#g(t,e,i){const s=document.createElement("button");s.className="category-button";const n=document.createElement("img");return n.src=i,n.alt=e,n.classList.add("category-icon"),s.dataset.categoryId=t.toString(),s.appendChild(n),s}#v(t){t.innerHTML="";for(const e in this.#o){const i=this.#o[e];if(!i)continue;const s=document.createElement("button");s.className="particle-button",s.textContent=i.name;const n=i.baseColor,o=i.variantColor,a=v.getLuminance(v.hexToColor(n))>210?"#323238":"#FFFFFFFF",l=v.hexToColor(a);s.style.setProperty("--particle-button-base-color",n),s.style.setProperty("--particle-button-variant-color",o),s.style.color=a,s.style.textShadow=`1px 1px 2px rgba(${l[0]}, ${l[1]}, ${l[2]}, 0.6)`,s.dataset.particleId=i.id.toString(),s.dataset.category=i.category.toString(),t.appendChild(s),i.id===this.#l&&(this.#d=s)}}#P(){const t=this.#e,e=document.getElementById("particle-category-bar"),i=document.getElementById("particle-button-container");if(!e||!i)throw new Error("Cannot find category bar and/ or button container");t.addEventListener("pointerdown",this.#w),t.addEventListener("pointermove",this.#A),t.addEventListener("pointerup",this.#I),t.addEventListener("pointercancel",this.#C),t.addEventListener("lostpointercapture",this.#C),t.addEventListener("pointerenter",this.#S),t.addEventListener("pointerleave",this.#_),t.addEventListener("wheel",this.#L,{passive:!1}),t.addEventListener("contextmenu",this.#D),window.addEventListener("pointerup",this.#x),window.addEventListener("mouseup",this.#x),document.addEventListener("visibilitychange",this.#T),e.addEventListener("click",s=>{if(!s.target)return;const o=s.target.closest(".category-button");o&&o&&this.#y(o)}),i.addEventListener("click",s=>{if(!s.target)return;const o=s.target.closest(".particle-button");o&&this.#E(o)})}#w=t=>{this.#u=t.pointerId,t.button===0?(this.isPainting=!0,this.isErasing=!1,this.activeButton="left"):t.button===2?(this.isErasing=!0,this.isPainting=!1,this.activeButton="right"):(this.isPainting=!1,this.isErasing=!1,this.activeButton="none");try{this.#e.setPointerCapture(t.pointerId)}catch{}const e=this.#e.getBoundingClientRect(),i=this.#t/e.width,s=this.#i/e.height;this.latestMouseCoords.x=(t.clientX-e.left)*i,this.latestMouseCoords.y=this.#e.height-(t.clientY-e.top)*s};#I=t=>{if(this.#u===t.pointerId){this.#u=null,this.activeButton="none";try{this.#e.releasePointerCapture(t.pointerId)}catch{}}this.isPainting=!1,this.isErasing=!1};#A=t=>{const e=this.#e.getBoundingClientRect(),i=this.#t/e.width,s=this.#e.height/e.height;if(this.latestMouseCoords.x=(t.clientX-e.left)*i,this.latestMouseCoords.y=this.#e.height-(t.clientY-e.top)*s,typeof t.buttons=="number"){const n=(t.buttons&1)===1,o=(t.buttons&2)===2;this.isPainting=n,this.isErasing=o}};#C=t=>{if(this.isPainting=!1,this.isErasing=!1,this.#u===t.pointerId){try{this.#e.releasePointerCapture(t.pointerId)}catch{}this.#u=null,this.activeButton="none"}};#x=()=>{this.isPainting=!1,this.isErasing=!1,this.#u=null,this.activeButton="none"};#T=()=>{document.hidden&&(this.isPainting=!1,this.isErasing=!1,this.#u=null,this.activeButton="none")};#L=t=>{t.preventDefault(),this.shouldChangeBrushSize=!0,this.changeBrushSizeDir=t.deltaY};#D=t=>{t.preventDefault()};#S=t=>{this.isDrawingOverlay=!0};#_=t=>{this.isDrawingOverlay=!1}}class U{#t;#i;#s;#e;#o;#r;#a;constructor(t){this.#t=!1,this.#i=!1,this.#s=new Map,this.#e=0,this.#o=0,this.#r=0,this.#a=0,this.#n(t)}enableDebug(t){this.#t=!0,t&&(this.#i=!0)}disableDebug(){this.#t=!1,this.#i=!1}updateDisplay(t,e){if(!this.#t)return;this.#l(t,e);const i=this.#s.get("fps");i&&(i.textContent=`FPS: ${this.#o.toFixed(2)}`);const s=this.#s.get("tps");s&&(s.textContent=`TPS: ${this.#r.toFixed(2)}`)}#l(t,e){const i=t-this.#a;i>=1e3&&(this.#o=this.#e*1e3/i,this.#r=e.tickCount*1e3/i,this.#e=0,e.tickCount=0,this.#a=t),this.#e++}#n(t){const e=document.createElement("div");e.classList.add("debug-container"),t.appendChild(e),this.#s.set("debug-container",e);const i=document.createElement("div");i.classList.add("debug-info-container"),e.appendChild(i),this.#s.set("info-container",i);const s=document.createElement("div");s.classList.add("debug-info"),i.appendChild(s),this.#s.set("fps",s);const n=document.createElement("div");n.classList.add("debug-info"),i.appendChild(n),this.#s.set("tps",n)}}async function H(){try{const c=I.GAME_WIDTH,t=I.GAME_HEIGHT,e=document.getElementById("main-canvas");if(!(e instanceof HTMLCanvasElement))throw new Error("HTML element 'main-canvas' does not exist.");const i=document.getElementById("main-panel");if(!(i instanceof HTMLDivElement))throw new Error("HTML element 'main-panel' does not exist.");const s=new R(c,t,e),n=await _("./src/data/particles.data"),o=new O(c,t,I,n,i,e),r=new U(i);r.enableDebug(!0),new N(c,t,n,s,o,r).start(),console.log(n)}catch(c){console.error("CRITICAL ERROR: Failed to initialize engine due to data loading failure.",c)}}H();
